# ðŸ“Š Google Sheets Integration Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      User's Browser                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Sheet Ledger React App                       â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚   Header     â”‚  â”‚  Summary     â”‚  â”‚Transaction â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  (Status)    â”‚  â”‚   Cards      â”‚  â”‚    List    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚      useTransactions Hook                    â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  (State Management + Business Logic)        â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                      â”‚                               â”‚  â”‚
â”‚  â”‚                      â–¼                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚      google-sheets.ts                        â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  (API Calls + Error Handling)                â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ HTTPS REST API
                           â”‚ (Google Sheets API v4)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Google Cloud                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         Google Sheets API Service                â”‚       â”‚
â”‚  â”‚  â€¢ Authentication (API Key)                      â”‚       â”‚
â”‚  â”‚  â€¢ Authorization (Spreadsheet Permissions)       â”‚       â”‚
â”‚  â”‚  â€¢ Rate Limiting                                 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Your Google Spreadsheet                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  2024-11    â”‚  â”‚  2024-12    â”‚  â”‚  2025-01    â”‚  ...   â”‚
â”‚  â”‚  (Tab)      â”‚  â”‚  (Tab)      â”‚  â”‚  (Tab)      â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ Header Row  â”‚  â”‚ Header Row  â”‚  â”‚ Header Row  â”‚        â”‚
â”‚  â”‚ Transaction â”‚  â”‚ Transaction â”‚  â”‚ Transaction â”‚        â”‚
â”‚  â”‚ Transaction â”‚  â”‚ Transaction â”‚  â”‚ Transaction â”‚        â”‚
â”‚  â”‚     ...     â”‚  â”‚     ...     â”‚  â”‚     ...     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagrams

### ðŸ“ Add Transaction Flow

```
User                  App                    Google Sheets API
 â”‚                     â”‚                           â”‚
 â”‚ Click "Add"         â”‚                           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚                     â”‚                           â”‚
 â”‚ Fill Form           â”‚                           â”‚
 â”‚ Submit              â”‚                           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚                     â”‚ Determine month from date â”‚
 â”‚                     â”‚ (e.g., "2024-12")         â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Check if tab exists       â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚ (Tab list returned)       â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ If tab missing:           â”‚
 â”‚                     â”‚ Create tab "2024-12"      â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚ (Tab created)             â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Append transaction row    â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚ (Row added)               â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Update local state        â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
 â”‚ Show success toast  â”‚                           â”‚
 â”‚                     â”‚                           â”‚
```

### âœï¸ Edit Transaction Flow

```
User                  App                    Google Sheets API
 â”‚                     â”‚                           â”‚
 â”‚ Click Edit          â”‚                           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚                     â”‚                           â”‚
 â”‚ Modify & Submit     â”‚                           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Check if date changed     â”‚
 â”‚                     â”‚ months                    â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ IF SAME MONTH:            â”‚
 â”‚                     â”‚ Find row by ID            â”‚
 â”‚                     â”‚ Update row in place       â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ IF DIFFERENT MONTH:       â”‚
 â”‚                     â”‚ Delete from old month     â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Add to new month          â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚ (Update complete)         â”‚
 â”‚                     â”‚                           â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
 â”‚ Show success toast  â”‚                           â”‚
 â”‚                     â”‚                           â”‚
```

### ðŸ—‘ï¸ Delete Transaction Flow

```
User                  App                    Google Sheets API
 â”‚                     â”‚                           â”‚
 â”‚ Click Delete        â”‚                           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚                     â”‚                           â”‚
 â”‚ Confirm             â”‚                           â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Find month tab            â”‚
 â”‚                     â”‚ Find row by ID            â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Delete row                â”‚
 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                     â”‚ (Row deleted)             â”‚
 â”‚                     â”‚                           â”‚
 â”‚                     â”‚ Update local state        â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
 â”‚ Show success toast  â”‚                           â”‚
 â”‚                     â”‚                           â”‚
```

## File Structure & Responsibilities

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.tsx              # Shows connection status
â”‚   â”œâ”€â”€ MonthSwitcher.tsx       # Switch between months
â”‚   â”œâ”€â”€ SummaryCards.tsx        # Show income/expense totals
â”‚   â”œâ”€â”€ TransactionForm.tsx     # Add/Edit form
â”‚   â”œâ”€â”€ TransactionList.tsx     # Display transactions
â”‚   â”œâ”€â”€ DeleteConfirmDialog.tsx # Confirm deletions
â”‚   â””â”€â”€ ApiStatusBanner.tsx     # â­ Alerts when API not configured
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useTransactions.ts      # â­ Main business logic
â”‚       â€¢ State management
â”‚       â€¢ CRUD operations
â”‚       â€¢ Month switching
â”‚       â€¢ Integration with Google Sheets API
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ google-sheets.ts        # â­ Google Sheets API wrapper
â”‚   â”‚   â€¢ Authentication
â”‚   â”‚   â€¢ Tab management
â”‚   â”‚   â€¢ CRUD operations
â”‚   â”‚   â€¢ Error handling
â”‚   â”‚
â”‚   â”œâ”€â”€ date-utils.ts           # Date formatting & month tabs
â”‚   â”œâ”€â”€ format-currency.ts      # Currency display
â”‚   â””â”€â”€ utils.ts                # General utilities
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ transaction.ts          # TypeScript types
â”‚       â€¢ Transaction interface
â”‚       â€¢ Categories & Accounts
â”‚
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ Index.tsx               # Main page component
â”‚
â””â”€â”€ vite-env.d.ts              # Environment variable types

Configuration Files:
â”œâ”€â”€ .env                        # â­ Your credentials (SECRET!)
â”œâ”€â”€ .env.example                # Template for .env
â”œâ”€â”€ vite.config.ts              # Vite configuration
â”œâ”€â”€ tsconfig.json               # TypeScript config
â””â”€â”€ tailwind.config.ts          # Tailwind CSS config
```

## API Functions Overview

### google-sheets.ts Functions

```typescript
// Configuration
isApiConfigured: boolean        // â­ Check if credentials are set

// Tab Management
getSheetTabs()                 // List all tabs
monthTabExists(monthName)      // Check if specific tab exists
createMonthTab(monthName)      // Create new month tab with headers

// Data Operations
readMonthData(monthName)       // Read all transactions from month
appendRows(monthName, rows)    // Add new rows
updateRowById(month, id, data) // Update existing row
deleteRowById(month, id)       // Delete row
findRowIndexById(month, id)    // Locate row by ID

// High-Level Operations
addTransaction(month, data)    // Complete add workflow
```

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           useTransactions Hook                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  State:                                              â”‚
â”‚  â€¢ transactions: Record<string, Transaction[]>      â”‚
â”‚  â€¢ currentMonth: string                             â”‚
â”‚  â€¢ isLoading: boolean                               â”‚
â”‚  â€¢ useLocalData: boolean                            â”‚
â”‚                                                      â”‚
â”‚  Effects:                                            â”‚
â”‚  â€¢ Load data when month changes                     â”‚
â”‚  â€¢ Load available tabs on mount                     â”‚
â”‚                                                      â”‚
â”‚  Operations:                                         â”‚
â”‚  â€¢ addTransaction()                                  â”‚
â”‚  â€¢ updateTransaction()                               â”‚
â”‚  â€¢ deleteTransaction()                               â”‚
â”‚  â€¢ setCurrentMonth()                                 â”‚
â”‚                                                      â”‚
â”‚  Computed:                                           â”‚
â”‚  â€¢ currentMonthTransactions (filtered, sorted)      â”‚
â”‚  â€¢ monthTabs (available months)                     â”‚
â”‚  â€¢ summary (income, expense, balance)               â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Month Tab Structure

Each month tab in Google Sheets:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A     â”‚ B        â”‚ C          â”‚ D        â”‚ E        â”‚ F       â”‚ G    â”‚ ... â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ID    â”‚ Date     â”‚ Expense â‚¹  â”‚ Income â‚¹ â”‚ Category â”‚ Account â”‚ Note â”‚ ... â”‚ â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ txn_1 â”‚ 2024-... â”‚ 2500       â”‚          â”‚ Food     â”‚ Cash    â”‚ ...  â”‚     â”‚ â† Data
â”‚ txn_2 â”‚ 2024-... â”‚            â”‚ 85000    â”‚ Salary   â”‚ Bank    â”‚ ...  â”‚     â”‚
â”‚ txn_3 â”‚ 2024-... â”‚ 1200       â”‚          â”‚ Transportâ”‚ UPI     â”‚ ...  â”‚     â”‚
â”‚  ...  â”‚   ...    â”‚    ...     â”‚   ...    â”‚   ...    â”‚  ...    â”‚ ...  â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Columns:
A: ID (unique identifier)
B: Date (ISO format)
C: Expense â‚¹ (number or empty)
D: Income â‚¹ (number or empty)
E: Category (string)
F: Account (string)
G: Notes (string)
H: CreatedAt (timestamp)
I: UpdatedAt (timestamp)
```

## Authentication Flow

```
1. Application Startup
   â”œâ”€> Load environment variables
   â”œâ”€> Check if VITE_GOOGLE_API_KEY is set
   â”œâ”€> Check if VITE_GOOGLE_SPREADSHEET_ID is set
   â””â”€> Set isApiConfigured flag

2. API Request
   â”œâ”€> Check isApiConfigured
   â”œâ”€> If false: throw error, fallback to demo mode
   â”œâ”€> If true: construct API URL with key
   â”œâ”€> Make HTTPS request
   â””â”€> Google validates API key & permissions

3. Response Handling
   â”œâ”€> Success: parse data, update state
   â”œâ”€> 401/403: API key issue
   â”œâ”€> 404: Resource not found
   â””â”€> Other: log error, show toast
```

## Error Handling Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Error Occurs                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Is API configured?                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NO  â†’ Show demo data                   â”‚
â”‚        Show "Demo Mode" banner          â”‚
â”‚        Log to console                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼ YES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    API call fails?                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  YES â†’ Show error toast                 â”‚
â”‚        Log detailed error               â”‚
â”‚        Keep local state                 â”‚
â”‚        Don't update Google Sheets       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Environment Variables

```bash
# Development (.env)
VITE_GOOGLE_API_KEY=AIzaSyC...
VITE_GOOGLE_SPREADSHEET_ID=1ABC...

# â†“ Vite bundles into app as:
import.meta.env.VITE_GOOGLE_API_KEY
import.meta.env.VITE_GOOGLE_SPREADSHEET_ID

# TypeScript knows about them via:
src/vite-env.d.ts
```

## Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. .gitignore                                              â”‚
â”‚     â””â”€> .env files excluded from git                       â”‚
â”‚                                                             â”‚
â”‚  2. API Key Restrictions (Google Cloud)                    â”‚
â”‚     â”œâ”€> API restrictions: Google Sheets API only           â”‚
â”‚     â””â”€> Application restrictions: HTTP referrers           â”‚
â”‚                                                             â”‚
â”‚  3. Spreadsheet Permissions                                â”‚
â”‚     â””â”€> Public, but ID kept private                        â”‚
â”‚                                                             â”‚
â”‚  4. HTTPS                                                  â”‚
â”‚     â””â”€> All API calls encrypted                            â”‚
â”‚                                                             â”‚
â”‚  5. Environment Variables                                  â”‚
â”‚     â””â”€> Credentials separated from code                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Legend:**
- â­ = Key/Critical component
- â†’ = Data flow
- â”œâ”€> = Decision branch
- â””â”€> = Result/outcome
